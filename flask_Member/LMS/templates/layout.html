<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>{% block title %}LHJ System{% endblock %}</title>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg1:#eef1ff;
      --bg2:#f7f2ff;
      --ink:#121826;
      --muted:#6b7280;
      --line:#e9ecf4;
      --p1:#6d5dfc;
      --p2:#7c3aed;
      --shadowNav: 0 8px 20px rgba(16,24,40,.06);
      --max: 1120px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: "Pretendard", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 500px at 25% 0%, var(--bg1) 0%, transparent 60%),
        radial-gradient(1200px 600px at 80% 10%, var(--bg2) 0%, transparent 55%),
        #f6f7fb;
    }

    a{ color:inherit; text-decoration:none; }
    .container{ width:min(var(--max), calc(100% - 40px)); margin:0 auto; }

    /* ===== Top Nav ===== */
    .topbar{
      position: sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(246,247,251,.70);
      border-bottom: 1px solid rgba(233,236,244,.9);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding: 16px 0;
      gap: 16px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:800; letter-spacing:-.3px;
    }
    .logo{
      width:38px; height:38px; border-radius:12px;
      display:grid; place-items:center;
      background: linear-gradient(135deg, rgba(109,93,252,.18), rgba(124,58,237,.18));
      border: 1px solid rgba(109,93,252,.25);
    }
    .logo i{ color: var(--p2); }
    .brand span{ font-size:20px; color:#4c3ef0; }

    .menu{
      display:flex; align-items:center; gap:22px;
      color: #3a3f52;
      font-weight:700;
    }
    .menu a{
      padding: 10px 10px;
      border-radius: 12px;
      transition:.15s ease;
      opacity:.9;
    }
    .menu a:hover{
      background: rgba(109,93,252,.10);
      opacity:1;
    }
    /* ✅ 메뉴 활성 표시 */
    .menu a.active{
      color:#4c3ef0;
      background: rgba(109,93,252,.12);
    }

    .actions{ display:flex; align-items:center; gap:10px; }
    .nav-link{
      font-weight:800;
      color:#4c3ef0;
      padding:10px 14px;
      border-radius: 14px;
      transition:.15s ease;
    }
    .nav-link:hover{ background: rgba(109,93,252,.10); }

    .nav-btn{
      border:0; cursor:pointer;
      font-weight:900;
      padding: 12px 16px;
      border-radius: 14px;
      color:white;
      background: linear-gradient(135deg, var(--p1), var(--p2));
      box-shadow: 0 10px 18px rgba(124,58,237,.25);
      transition:.15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    .nav-btn:hover{ transform: translateY(-1px); }

    /* ===== Page wrapper ===== */
    main.page{
      padding: 28px 0 10px;
    }

    footer{
      padding: 26px 0 36px;
      color: var(--muted);
      text-align:center;
      font-weight: 600;
    }

    @media (max-width: 980px){
      .menu{ display:none; }
    }

   /* ===== FOOTER (COMPACT) ===== */

.site-footer{
  margin-top:40px;
  color:#fff;
  background: linear-gradient(135deg,#6d5dfc,#7c3aed);
  padding-top:22px;          /* ✅ 보라영역 얇게 */
}

.footer-inner{
  display:grid;
  grid-template-columns: 1.4fr .9fr 1fr;
  gap:36px;                  /* ✅ 간격 줄임 */
  padding-bottom:14px;       /* ✅ 아래 여백 줄임 */
  align-items:start;
}

.footer-brand{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}

.footer-logo{
  width:34px;                /* ✅ 로고 작게 */
  height:34px;
  border-radius:11px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,.14);
}

.footer-logo i{ color:#fff; font-size:14px; }

.footer-left h3{
  margin:0;
  font-size:16px;            /* ✅ 브랜드 글자 작게 */
  font-weight:800;
  letter-spacing:-.2px;
}

.footer-desc{
  margin:0;
  opacity:.92;
  line-height:1.55;
  font-weight:500;
  font-size:13px;            /* ✅ 설명 글자 작게 */
}

.footer-links h4,
.footer-contact h4{
  margin:0 0 10px;
  font-size:13px;            /* ✅ 섹션 타이틀 작게 */
  font-weight:800;
  opacity:.95;
}

.footer-links a{
  display:block;
  margin-bottom:8px;
  font-size:13px;
  opacity:.9;
}

.footer-links a:hover{
  opacity:1;
  text-decoration:underline;
}

.footer-contact p{
  margin:7px 0;
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  opacity:.95;
}

.footer-contact i{ width:16px; text-align:center; opacity:.95; }

.footer-bottom{
  border-top:1px solid rgba(255,255,255,.22);
  padding:10px 0 14px;       /* ✅ 바닥영역 얇게 */
  display:flex;
  justify-content:space-between;
  font-size:12px;            /* ✅ 하단 글자 작게 */
  opacity:.9;
}

/* ===== Role Badge ===== */
.role-badge{
  display:inline-block;
  margin-left:8px;
  padding:4px 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:900;
  letter-spacing:.2px;
}

/* 권한별 색상 */
.role-admin{
  background:#ffe4e6;
  color:#dc2626;
}

.role-manager{
  background:#e0e7ff;
  color:#4c3ef0;
}

.role-user{
  background:#ecfdf5;
  color:#059669;
}



/* 모바일 */
@media(max-width:900px){
  .footer-inner{
    grid-template-columns:1fr;
    gap:18px;
  }
  .footer-bottom{
    flex-direction:column;
    gap:8px;
    text-align:center;
  }
}
/* ===== AUTH/UI CARD (login-card 공통) ===== */
:root{
  --login-card:#ffffff;
  --login-ink:#111827;
  --login-muted:#6b7280;
  --login-p1:#6d5dfc;
  --login-p2:#7c3aed;
  --login-shadow: 0 18px 45px rgba(16,24,40,.10);
  --login-shadow2: 0 12px 25px rgba(124,58,237,.18);
  --login-radius: 22px;
}

/* 페이지 가운데 정렬이 필요한 화면용 */
.page-center{
  min-height: calc(100vh - 140px);
  display:flex;
  align-items:center;
  justify-content:center;
}

.login-card{
  width: min(430px, 100%);
  background: var(--login-card);
  border: 1px solid rgba(233,236,244,.9);
  border-radius: var(--login-radius);
  box-shadow: var(--login-shadow);
  padding: 34px 32px 28px;
  text-align:center;
}

.login-app-icon{
  width:78px; height:78px;
  border-radius: 22px;
  margin: 0 auto 14px;
  display:grid; place-items:center;
  background: linear-gradient(135deg, var(--login-p1), var(--login-p2));
  box-shadow: var(--login-shadow2);
  position: relative;
  overflow:hidden;
}
.login-app-icon::before{
  content:"";
  position:absolute; inset:-30px -20px auto auto;
  width:90px; height:90px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.45), transparent 60%);
  transform: rotate(20deg);
}
.login-app-icon span{
  position:relative;
  font-weight: 900;
  color:white;
  letter-spacing:-.5px;
  line-height:1.05;
  font-size: 14px;
  opacity:.95;
}

.login-title{
  margin: 8px 0 8px;
  font-size: 28px;
  letter-spacing:-.8px;
  color: var(--login-ink);
  font-weight: 900;
}
.login-sub{
  margin:0 0 22px;
  color: var(--login-muted);
  font-weight: 700;
  font-size: 14px;
}

.login-field{ text-align:left; margin-top: 14px; }
.login-label{
  display:block;
  font-weight: 900;
  margin-bottom: 8px;
  font-size: 14px;
}
.login-input{
  width:100%;
  border: 1px solid rgba(233,236,244,.95);
  background: #f7f8fd;
  border-radius: 14px;
  padding: 14px 14px;
  outline:none;
  font-size: 14px;
  transition:.15s ease;
}
.login-input:focus{
  background:#fff;
  border-color: rgba(109,93,252,.55);
  box-shadow: 0 0 0 4px rgba(109,93,252,.12);
}

.login-btn{
  width:100%;
  border:0;
  cursor:pointer;
  border-radius: 14px;
  padding: 14px 16px;
  font-weight: 900;
  font-size: 15px;
  color:white;
  background: linear-gradient(135deg, var(--login-p1), var(--login-p2));
  box-shadow: 0 14px 25px rgba(124,58,237,.22);
  transition:.15s ease;
}
.login-btn:hover{ transform: translateY(-1px); }

.btn-outline{
  width:100%;
  border-radius: 14px;
  padding: 14px 16px;
  font-weight: 900;
  font-size: 15px;
  cursor:pointer;
  border: 1px solid rgba(233,236,244,.95);
  background:#fff;
  color: var(--login-ink);
  box-shadow: 0 10px 18px rgba(16,24,40,.06);
  transition:.15s ease;
  text-decoration:none;
  display:inline-block;
  text-align:center;
}
.btn-outline:hover{ transform: translateY(-1px); }

.mypage-actions{
  margin-top: 18px;
  display:flex;
  gap: 10px;
}

.mypage-muted{
  display:block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--login-muted);
  font-weight: 800;
}


  </style>

  {% block head_extra %}{% endblock %}
</head>

<body>
{% set path = request.path %}

<header class="topbar">
  <div class="container">
    <div class="nav">
      <a class="brand" href="/">
        <div class="logo"><i class="fa-solid fa-graduation-cap"></i></div>
        <span>LHJ System</span>
      </a>

      <nav class="menu" aria-label="main">
        <a href="/" class="{% if path == '/' %}active{% endif %}">홈</a>
        <a href="/board/list" class="{% if path.startswith('/board') %}active{% endif %}">게시판</a>
        <a href="/score" class="{% if path.startswith('/score') %}active{% endif %}">성적관리</a>
        <a href="/shop" class="{% if path.startswith('/shop') %}active{% endif %}">상품몰</a>
        {% if 'user_id' in session and role in ['admin','manager'] %}
        <a href="/admin/members" class="{% if path.startswith('/admin') %}active{% endif %}">
          회원관리
        </a>
        {% endif %}

        <!-- ⚠️ 지금 여기 링크가 /member 라서 라우트 없으면 404 -->

      </nav>

      <div class="actions">

        {% if 'user_id' not in session %}
        <!-- 로그인 전 -->
        <a class="nav-link" href="/login">로그인</a>
        <a class="nav-btn" href="/join">
          <i class="fa-solid fa-user-plus"></i> 회원가입
        </a>

        {% else %}
        {% set role = session.get('user_role', 'user') %}
        {% set role_map = {
        'admin':'관리자',
        'manager':'매니저',
        'user':'일반회원'
        } %}

        <!-- ✅ 로그인 사용자 표시 -->
        <span class="nav-link" style="display:flex;align-items:center;">
      {{ session.get('user_name') }}님
      <span class="role-badge role-{{ role }}">
        {{ role_map.get(role, '회원') }}
      </span>
    </span>

        <!-- ✅ 모든 로그인 사용자 -->
        <a class="nav-link" href="/mypage">마이페이지</a>

        <!-- ✅ admin + manager만 -->
        {% if role in ['admin','manager'] %}
        <a class="nav-link" href="/admin/members"
           class="{% if path.startswith('/admin') %}active{% endif %}">
          관리
        </a>
        {% endif %}

        <!-- 로그아웃 -->
        <a class="nav-btn" href="/logout">
          <i class="fa-solid fa-right-from-bracket"></i> 로그아웃
        </a>

        {% endif %}
      </div>


    </div>
  </div>
</header>

<main class="container page">
  {% block content %}{% endblock %}
</main>

<!-- ===== FOOTER ===== -->
<footer class="site-footer">
  <div class="footer-inner container">

    <!-- LEFT -->
    <div class="footer-left">
      <div class="footer-brand">
        <div class="footer-logo">
          <i class="fa-solid fa-graduation-cap"></i>
        </div>
        <h3>LHJ System</h3>
      </div>

      <p class="footer-desc">
        최고의 서비스를 제공합니다.<br>
        학생 성적관리, 게시판, 상품몰을 통합한<br>
        역할 기반 웹 대시보드 시스템
      </p>
    </div>

    <!-- CENTER -->
    <div class="footer-links">
      <h4>빠른 링크</h4>
      <a href="/board">게시판</a>
      <a href="/score">성적관리</a>
      <a href="/shop">상품몰</a>
    </div>

    <!-- RIGHT -->
    <div class="footer-contact">
      <h4>고객지원</h4>

      <p><i class="fa-solid fa-phone"></i> 02-1234-5678</p>
      <p><i class="fa-solid fa-envelope"></i> lhj@lhj.com</p>
      <p><i class="fa-regular fa-clock"></i> 평일 09:00 - 18:00</p>
    </div>

  </div>

  <div class="footer-bottom container">
    <span>© 2024 LHJ System. All rights reserved.</span>
    <span>Powered by Readdy</span>
  </div>
</footer>


{% block scripts %}{% endblock %}
</body>
</html>