{% extends "layout.html" %}
{% block title %}게시글 작성 | LHJ System{% endblock %}

{% block content %}
<style>
  /* board write page only */
  .write-wrap{
    padding: 18px 0 12px;
  }

  .write-hero{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:16px;
    margin-bottom: 14px;
  }
  .write-hero h2{
    margin:0;
    font-size: 30px;
    font-weight: 900;
    letter-spacing: -.02em;
  }
  .write-hero p{
    margin:6px 0 0;
    color: var(--muted);
    font-weight: 700;
  }

  .write-card{
    background:#fff;
    border:1px solid rgba(233,236,244,.9);
    border-radius:22px;
    padding:22px;
    box-shadow: 0 16px 40px rgba(16,24,40,.08);
  }

  .grid{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }
  @media (max-width: 820px){
    .grid{ grid-template-columns: 1fr; }
  }

  .form-row{ margin-bottom:14px; }
  .label{
    font-weight:900;
    margin-bottom:6px;
    display:block;
  }

  .input, textarea, select{
    width:100%;
    padding:12px 14px;
    border-radius:14px;
    border:1px solid rgba(233,236,244,.9);
    font-weight:700;
    background:#f7f8ff;
    outline:none;
    transition:.15s ease;
  }
  .input:focus, textarea:focus, select:focus{
    background:#fff;
    border-color: rgba(109,93,252,.55);
    box-shadow: 0 0 0 4px rgba(109,93,252,.12);
  }

  textarea{
    min-height: 240px;
    resize: vertical;
    line-height: 1.65;
  }

  .pin-box{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding: 12px 14px;
    border-radius: 16px;
    border:1px solid rgba(233,236,244,.9);
    background:#fbfbff;
  }
  .pin-left{
    display:flex;
    gap:10px;
    align-items:flex-start;
  }
  .pin-left i{
    color:#dc2626;
    margin-top:2px;
  }
  .pin-title{
    font-weight: 900;
  }
  .pin-desc{
    color: var(--muted);
    font-weight: 700;
    font-size: 13px;
    margin-top: 2px;
  }

  .switch{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight: 900;
  }
  .switch input{
    width: 18px;
    height: 18px;
    cursor:pointer;
  }

  .actions{
    margin-top: 16px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    flex-wrap: wrap;
  }

  .btn{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding: 12px 16px;
    border-radius: 14px;
    font-weight: 900;
    border:1px solid rgba(233,236,244,.9);
    background:#fff;
    cursor:pointer;
    text-decoration:none;
    box-shadow: 0 10px 18px rgba(16,24,40,.06);
    transition:.15s ease;
  }
  .btn:hover{ transform: translateY(-1px); }

  .btn-primary{
    border:0;
    color:#fff;
    background: linear-gradient(135deg, var(--p1), var(--p2));
    box-shadow: 0 12px 24px rgba(124,58,237,.22);
  }

  .note{
    margin-top: 10px;
    color: var(--muted);
    font-weight: 800;
    font-size: 12px;
  }
</style>

<div class="write-wrap">

  <div class="write-hero">
    <div>
      <h2>게시글 작성</h2>
      <p>새로운 게시글을 작성합니다.</p>
    </div>

    <a class="btn" href="/board/list?type=notice">
      <i class="fa-solid fa-list"></i> 목록
    </a>
  </div>

  <div class="write-card">
    <form method="post">

      <div class="grid">
        <!-- 게시판 종류 -->
        <div class="form-row">
          <label class="label">게시판 종류</label>
          <select name="board_type" class="input">
            <option value="notice">공지사항</option>
            <option value="free">자유게시판</option>
            <option value="qna">Q&A</option>
          </select>
        </div>

        <!-- 작성일 선택 -->
        <div class="form-row">
          <label class="label">작성일 선택</label>
          <input type="date" name="display_date" class="input">
        </div>
      </div>

      <!-- 제목 -->
      <div class="form-row">
        <label class="label">제목</label>
        <input name="title" class="input" placeholder="제목을 입력하세요" required>
      </div>

      <!-- 내용 -->
      <div class="form-row">
        <label class="label">내용</label>
        <textarea name="content" class="input" placeholder="내용을 입력하세요" required></textarea>
      </div>

      <!-- ✅ 상단 고정(권한 있는 사람만 노출) -->
      {% set role = session.get('user_role', 'user') %}
      {% if role in ['admin', 'manager'] %}
      <div class="form-row">
        <div class="pin-box">
          <div class="pin-left">
            <i class="fa-solid fa-thumbtack"></i>
            <div>
              <div class="pin-title">상단 고정 공지로 설정</div>
              <div class="pin-desc">공지사항 탭에서 상단에 고정되어 노출됩니다.</div>
            </div>
          </div>

          <label class="switch">
            <input type="checkbox" name="is_pinned">
            고정
          </label>
        </div>
        <div class="note">* 관리자/매니저만 고정 기능을 사용할 수 있습니다.</div>
      </div>
      {% endif %}

      <div class="actions">
        <a class="btn" href="/board/list?type=notice">
          <i class="fa-solid fa-xmark"></i> 취소
        </a>

        <button class="btn btn-primary" type="submit">
          <i class="fa-solid fa-check"></i> 등록하기
        </button>
      </div>

    </form>
  </div>

</div>
{% endblock %}